"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8269],{44487:function(g,b,a){a.d(b,{l:function(){return C}});var h=a(85893),i=a(67294),c=a(94184),j=a.n(c),k=a(25617),l=a(65781),m=a(64719),n=a(11163),d=a(9669),o=a.n(d),e=a(11752),p=a(57982),f=(0,e.default)().publicRuntimeConfig,q=f.addToBagStats,r=function(a,b){var c="".concat(q,"/").concat("prod"!==f.env?"integration-":"").concat(a);return o()({data:JSON.stringify(b),headers:{"Content-Type":"application/json"},method:"POST",url:c}).catch(function(a){p.Z.error("Unable to report Add To Bag stats",a)})},s={"/dispensary-info/[slug]":"dispensary","/dispensary-info/[slug]/deals":"dispensary","/dispensary-info/[slug]/menu":"dispensary","/dispensary-info/[slug]/p/[menuItem]/[productSlug]":"pdp","/search/shop":"shop-modal"},t=function(){var a=(0,n.useRouter)().pathname;return{reportATBStats:function(b){return r(s[a],b)}}},u=a(23193),v=a(91662),w=a(90951),x=a(64981),y=a(67190),z=a(58267),A=a(47706),B=a(5845),C=function(a){var c=a.buttonSize,d=void 0===c?"small":c,e=a.ctaText,f=a.addingToBagText,g=a.successText,D=a.variant,E=a.defaultVariantId,n=a.immediatelyAddToBag,L=a.menuItem,F=a.quantity,o=a.onClick,M=void 0===o?function(){}:o,p=a.onReservation,N=void 0===p?function(){}:p,G=a.splitClickEventName,O=a.merchandisingCampaignId,H=(0,k.v9)(x.QC),I=(0,k.v9)(w.Yq),P=(0,k.I0)(),q=(0,i.useState)(!1),J=q[0],Q=q[1],r=(0,i.useRef)(null),R=t().reportATBStats,S=(0,A.Y)(),T=(0,u.D)().publishEvent,s=(0,i.useState)(!1),K=s[0],U=s[1],C=(0,i.useState)(!1),b=C[0],V=C[1];return(0,i.useEffect)(function(){b&&(U(!1),setTimeout(function(){V(!1)},1200))},[b]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(z.Z,{"data-testid":"add-to-bag-button",icon:"bag",disabled:b,onClick:function(){U(!0),M(),T({action:y.aU.click,cartId:H,category:y.WD.addToBag,janeCheckoutEnabled:S,label:y.__.addToBag,menuItemId:L.id,merchandisingCampaignId:O,productId:E}),Q(!0)},size:d,className:j()("w-full disabled",{"py-sm":"small"===d}),ref:r,variant:D,loadingText:void 0===f?"adding":f,isLoading:K,children:b?void 0===g?"added!":g:void 0===e?"add to bag":e}),J&&(0,h.jsx)(B.Z,{cartId:H,quantity:F,consumerApiUrl:l.Z.defaults.baseURL,countryCode:I,onCartFetch:function(a){P({cart:a,type:v.M$}),"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("getcart"))},onDismiss:function(){Q(!1)},onReservation:function(){R({atbAction:!0,atbError:!1}),V(!0),N()},onReservationFail:function(){U(!1),R({atbAction:!0,atbError:!0})},reservationsApiUrl:m.Z.defaults.baseURL,returnFocusRef:r,splitEventName:G,useAddedToBagPopout:!0,immediatelyAddToBag:void 0!==n&&n,variantId:E})]})}},21408:function(d,b,a){a.d(b,{c:function(){return j}});var e=a(85893);a(67294);var c=a(41664),f=a.n(c),g=a(73931),h=a(58267),i=a(44487),j=function(a){var b=a.menuItem,c=a.onClick,d=a.viewDetailsOnClick,j=a.onMenuItemReserved,l=a.splitClickEventName,m=a.merchandisingCampaignId,k=(0,g.$)(b,b.id);return b.onlineFulfillmentEnabled?(0,e.jsx)(i.l,{defaultVariantId:b.id,menuItem:b,onClick:void 0===c?function(){}:c,onReservation:void 0===j?function(){}:j,splitClickEventName:l,merchandisingCampaignId:m}):(0,e.jsx)(f(),{href:k,passHref:!0,children:(0,e.jsx)(h.Z,{variant:"tertiary",size:"small",onClick:void 0===d?function(){}:d,style:{paddingBottom:6,paddingTop:6},href:k,"data-testid":"view-details-button",children:"view details"})})}},31761:function(e,b,a){a.d(b,{N:function(){return z},Z:function(){return w}});var f=a(85893),g=a(67294),c=a(94184),h=a.n(c),d=a(48403),i=a.n(d),j=function(a){var d=a.promoted,b=a.position,c=void 0===b?"right":b;return d&&(0,f.jsx)("div",{className:h()({"left-0":"left"===c,"right-0":"right"===c},"absolute z-10 top-0"),"data-testid":"ad-flag",children:(0,f.jsx)("div",{className:"text-xs px-xs m-xs rounded bg-leafly-white text-grey font-bold",children:"ad"})})},k=a(735),l=function(d){var a,i=d.menuItem,e=d.similarStrain,g=void 0!==e&&e,j=d.isFeatured,b=i||{},l=b.isTrending,m=b.isBestSeller,n=b.isNew,o=b.isStaffPick,c=!1;return(g?a="Similar strain":l?a="Trending now":m?a="Best seller":n?a="New":o&&(a="Staff pick",c=!0),j&&(a="Featured",c=!1),a)?(0,f.jsx)("div",{className:"absolute z-10 top-0 left-0 flex","data-testid":"card-flag",children:(0,f.jsxs)("div",{className:h()("inline-flex items-center font-bold leading-none text-xs p-sm",{"text-white bg-grey":!c}),style:{borderBottomRightRadius:"12px"},children:[c&&(0,f.jsx)("span",{className:"text-green mr-xs",children:(0,f.jsx)(k.default,{height:"14",width:"14"})}),g&&(0,f.jsx)("div",{className:"mr-xl",children:(0,f.jsxs)("div",{className:"absolute mr-sm z-10",children:[(0,f.jsx)("span",{className:"border border-default absolute",style:{borderRadius:"50%",bottom:-5,height:10,width:10}}),(0,f.jsx)("span",{className:"border border-default absolute",style:{borderRadius:"50%",bottom:-5,height:10,left:5,width:10}})]})}),a]})}):null},m=a(40567),n=a(42021),o=a(81089),p=a(31286),q=a(48666),r=a(25186),s=a(76406),t=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"US";return"$".concat(a.toLocaleString("en-".concat(b),{maximumFractionDigits:2,minimumFractionDigits:2}))};function u(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var v=function(a){var c=a.children,d=a.className,e=a.nextLink,h=a.nextLinkProps,g=a.menuItemUrl,b=a.handleCardClick;return e?(0,f.jsx)(e,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){u(d,a,c[a])})}return d}({passHref:!0},h,{href:g,children:(0,f.jsx)("a",{onClick:b,onKeyPress:b,className:d,role:"link",tabIndex:0,"data-testid":"menu-item-card-link",children:c})})):(0,f.jsx)("a",{className:d,href:g,onClick:b,onKeyPress:b,"data-testid":"menu-item-card-link",children:c})},w=function(b){var aa=b.className,I=b.countryCode,y=void 0===I?"US":I,J=b.handleCardClick,K=void 0===J?function(){}:J,L=b.isFeatured,M=b.menuItem,a=b.menuItem,N=a.brandName,z=a.cbdContent,e=a.cbdUnit,ab=a.deal,O=a.dispensary,ac=a.formattedThumbnailUrl,ad=a.id,A=a.name,B=a.offers,C=a.onlineFulfillmentEnabled,P=a.price,k=a.product,D=a.productCategory,Q=a.promoted,ae=a.quantity,d=a.strain,E=a.thcContent,u=a.thcUnit,af=a.unit,R=b.nextLink,S=b.nextLinkProps,T=void 0===S?{}:S,F=b.orderActions,U=b.renderFulfillmentInfo,V=b.showFulfillment,G=void 0!==V&&V,W=b.similarStrain,w=ab||{},ag=w.discountType,H=w.discountAmount,X=w.discountedPrice,ah=w.active,c=O||{},ai=c.logoUrl,aj=c.pickupEnabled,ak=c.deliveryEnabled,al=c.id,Y=c.distanceMi,Z=c.name,x=ah&&H&&X,am=!x&&(null==B?void 0:B.length)>0,$=(0,s.$)(M,ad),_=d&&"phenotype"in d?d.phenotype:null==d?void 0:d.category,an="Flower"===D&&_?"".concat(_," ").concat(D):D,ao=(0,q.o)({size:ae,unit:af}),ap=(0,g.useMemo)(function(){return(0,r.s)(ai)||"https://public.leafly.com/dispensary/static/placeholder-dispensary-photo.jpg"},[ai]),aq=(0,g.useMemo)(function(){if(G&&al)return C?aj&&ak?"Pickup or delivery ":ak?"Delivery only ":"Pickup ":"In-store only "},[aj,ak,al,C,G,]),ar=G&&null!=Y&&"".concat((0,p.S)(Y,y)," away");return(0,f.jsxs)("div",{className:h()("flex flex-col justify-between relative h-full w-full bg-white elevation-low rounded p-lg pt-xl overflow-y-hidden",aa),"data-testid":"menu-item-card",children:[(0,f.jsxs)(v,{className:"block h-full w-full",nextLink:R,nextLinkProps:T,menuItemUrl:$,handleCardClick:K,children:[(0,f.jsx)(l,{isFeatured:void 0!==L&&L,menuItem:M,similarStrain:void 0!==W&&W}),(0,f.jsx)(j,{promoted:void 0!==Q&&Q}),(0,f.jsx)("div",{className:"mx-auto mb-md",style:{width:112},children:(0,f.jsx)(n.Z,{src:ac,alt:A,sizes:[112],ratio:"square","data-testid":"menu-item-card__image"})}),(0,f.jsx)("div",{className:"text-secondary text-xs leading-none",children:i()(an)}),A&&(0,f.jsx)("h3",{className:"font-bold text-sm break-words underline mt-xs",children:A}),N&&(0,f.jsxs)("h4",{className:"font-normal text-xs",children:["by ",N]}),(!!E&&!!u|| !!z&&!!e)&&(0,f.jsxs)("div",{className:"flex flex-row font-bold text-xs mt-xs",children:[!!E&&!!u&&(0,f.jsxs)("div",{className:"mr-sm",children:["THC ","".concat(E).concat("percent"===u?"%":u)]}),!!z&&!!e&&(0,f.jsxs)("div",{children:["CBD ","".concat(z).concat("percent"===e?"%":e)]})]}),!!(null==k?void 0:k.avgApprovedPublicReviewRating)&&(0,f.jsx)(o.Z,{rating:k.avgApprovedPublicReviewRating,ratingCount:k.countApprovedPublicReviews,showRating:!0,starWidth:14,"data-testid":"menu-item-card__rating",className:"mt-xs"})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)(v,{className:h()("mt-sm",{"block mb-sm":!!F}),nextLink:R,nextLinkProps:T,menuItemUrl:$,handleCardClick:K,children:[(0,f.jsx)("div",{className:"font-bold text-xs",children:ao}),(0,f.jsx)("div",{className:h()("font-bold text-lg",{"text-notification":x}),"data-testid":"menu-item-card__price",children:"".concat(t(x?X/100:P,y))}),x&&(0,f.jsxs)("div",{"data-testid":"discount-details",className:"flex items-center text-xs mt-xs",children:[(0,f.jsx)("div",{className:"bg-notification rounded text-white font-bold mr-sm",style:{padding:"2px 4px"},children:"percent"===ag?"".concat(H,"% off"):"$".concat(H," off")}),(0,f.jsx)("span",{children:"reg ".concat(t(P,y))})]}),am&&(0,f.jsx)("div",{className:"mt-xs",children:(0,f.jsx)(m.Z,{offers:B,abridged:!0})}),G&&(0,f.jsxs)("div",{className:"flex items-center mt-xs","data-testid":"menu-item-card__fulfillment",children:[(0,f.jsx)("div",{className:"flex-shrink-0",style:{height:"24px",width:"24px"},children:(0,f.jsx)(n.Z,{src:ap,alt:Z,sizes:[24],className:"rounded"})}),(0,f.jsxs)("div",{className:"flex flex-col truncate font-bold text-xs ml-xs",children:[(0,f.jsxs)("span",{className:h()("truncate",{"font-normal":!C,"text-notification":C}),children:[aq,ar]}),(0,f.jsxs)("div",{className:"truncate",children:[(0,f.jsx)("span",{className:"font-normal",children:"from\xa0"}),Z]})]})]}),(void 0===U?function(){}:U)(O)]}),F&&(0,f.jsx)(F,{})]})]})},x=a(68183);function y(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var z=function(a){var b=a.showOrderActions,c=a.className,d=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,["showOrderActions","className"]);return(0,f.jsxs)("div",function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){y(d,a,c[a])})}return d}({className:h()("flex flex-col justify-between relative h-full w-full bg-white elevation-low rounded p-lg pt-xl",c)},d,{children:[(0,f.jsxs)("div",{className:"h-full w-full",children:[(0,f.jsx)(x.Z,{className:"mx-auto",width:"112",height:"112",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})}),(0,f.jsx)(x.Z,{width:"60",height:"12",className:"mt-md",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})}),(0,f.jsx)(x.Z,{width:"100%",height:"22",className:"mt-xs",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})}),(0,f.jsx)(x.Z,{width:"60%",height:"12",className:"mt-xs",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})}),(0,f.jsxs)("div",{className:"flex mt-md",children:[(0,f.jsx)(x.Z,{width:"65",height:"12",className:"mr-sm",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})}),(0,f.jsx)(x.Z,{width:"65",height:"12",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})})]}),(0,f.jsx)(x.Z,{width:"110",height:"14",className:"mt-md",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})})]}),(0,f.jsxs)("div",{className:"mt-xs",children:[(0,f.jsx)(x.Z,{width:"40",height:"12",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})}),(0,f.jsx)(x.Z,{width:"90",height:"22",className:"mt-sm",children:(0,f.jsx)(x.U,{width:"100%",height:"100%"})}),(void 0===b||b)&&(0,f.jsx)(x.Z,{width:"100%",height:"36",className:"mt-md",children:(0,f.jsx)(x.U,{width:"100%",height:"100%",rx:"16",ry:"16"})})]})]}))}},73931:function(c,a,b){b.d(a,{"$":function(){return d}});var d=function(a,d){var b,c=d||a.variants&&a.variants[0].id;return"/dispensary-info/".concat(a.dispensarySlug,"/p/").concat(a.menuItemId,"/").concat((b=a.name)?b.toLowerCase().trim().replace(/ /g,"-").replace(/[^\w-]+/g,"").substring(0,50):"product").concat(c?"?variant=".concat(c):"")}}}])